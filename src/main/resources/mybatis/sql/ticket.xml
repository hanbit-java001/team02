<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ticket">
	<!-- 티켓 예매하기 -->
	<insert id="reserveTicket" parameterType="TicketVO">
		INSERT INTO TICKET
			(train_id, seat_number, reserved_number, name, reserved_time, cancel)
		VALUES
			(#{trainId}, #{seatNumber}, #{reservedNumber}, #{name}, #{reservedTime}, #{cancel})
	</insert>

	<!-- 티켓 목록 보기 -->
	<select id="selectTickets" parameterType="map" resultType="TicketVO">
		SELECT train_id, seat_number, reserved_number, name, reserved_time, cancel
		  FROM TICKET
	     WHERE name = #{name} AND cancel = #{cancel}
	  ORDER BY reserved_time
	</select>

	<!-- 티켓 상세 보기 -->
	<select id="selectTicket" parameterType="map" resultType="TicketVO">
		SELECT train_id, seat_number, reserved_number, name, reserved_time, cancel
		  FROM TICKET
		 WHERE train_id = #{trainId} AND cancel = #{cancel}
	</select>

	<!-- 티켓 취소하기 -->
	<update id="cancelTicket" parameterType="TicketVO">
		UPDATE TICKET
		   SET cancel = #{cancel}
		 WHERE train_id = #{trainId}
	</update>
</mapper>